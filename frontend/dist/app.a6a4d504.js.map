{"version":3,"sources":["src/templates.js","src/utils.js","src/JobSearch.js","src/app.js"],"names":["jobTemplate","job","currency","title","salary_max","location","display_name","description","redirect_url","extractFormData","form","Array","from","elements","reduce","acc","id","value","getCurrencySymbol","country","currencies","gb","us","au","ca","JobSearch","searchFormSelector","resultsContainerSelector","loadingElementSelector","searchForm","document","querySelector","resultsContainer","loadingElement","countryCode","setCurrencySymbol","fetch","then","results","json","toLowerCase","currencySymbol","addEventListener","event","preventDefault","startLoading","innerHTML","search","response","stopLoading","map","join","jobs","catch","classList","add","remove","jobSearch","setCountryCode","configureFormListener"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export const jobTemplate = (job, currency) => `\r\n<div class=\"card\">\r\n  <div class=\"card-body\">\r\n  <h4 class=\"card-title\">${job.title} up to ${currency}${job.salary_max}</h4>\r\n  <h5>${job.location.display_name}</h5>\r\n  <p class=\"card-text\">${job.description}</p>\r\n  <a href=\"${job.redirect_url}\">View Job</a>\r\n  </div>\r\n</div>\r\n`;\r\n","export const extractFormData = (form) =>\r\n  Array.from(form.elements).reduce(\r\n    (acc, { id, value }) => ({ [id]: value, ...acc }),\r\n    {}\r\n  );\r\n\r\nexport const getCurrencySymbol = (country) => {\r\n  const currencies = {\r\n    gb: \"Â£\",\r\n    us: \"$\",\r\n    au: \"$\",\r\n    ca: \"$\",\r\n  };\r\n  return currencies[country];\r\n};\r\n","import { jobTemplate } from \"./templates\";\r\nimport { extractFormData, getCurrencySymbol } from \"./utils\";\r\n\r\nexport class JobSearch {\r\n  constructor(\r\n    searchFormSelector,\r\n    resultsContainerSelector,\r\n    loadingElementSelector\r\n  ) {\r\n    this.searchForm = document.querySelector(searchFormSelector);\r\n    this.resultsContainer = document.querySelector(resultsContainerSelector);\r\n    this.loadingElement = document.querySelector(loadingElementSelector);\r\n  }\r\n\r\n  setCountryCode() {\r\n    this.countryCode = \"gb\";\r\n    this.setCurrencySymbol();\r\n\r\n    fetch(\"http://ip-api.com/json\")\r\n      .then((results) => results.json())\r\n      .then((results) => {\r\n        this.countryCode = results.countryCode.toLowerCase();\r\n        this.setCurrencySymbol();\r\n      });\r\n  }\r\n\r\n  setCurrencySymbol() {\r\n    this.currencySymbol = getCurrencySymbol(this.countryCode);\r\n  }\r\n\r\n  configureFormListener() {\r\n    this.searchForm.addEventListener(\"submit\", (event) => {\r\n      event.preventDefault();\r\n      this.startLoading();\r\n      this.resultsContainer.innerHTML = \"\";\r\n      const { search, location } = extractFormData(this.searchForm);\r\n      fetch(\r\n        `http://localhost:3000/?search=${search}&location=${location}&country=${this.countryCode}`\r\n      )\r\n        .then((response) => response.json())\r\n        .then(({ results }) => {\r\n          this.stopLoading();\r\n          return results\r\n            .map((job) => jobTemplate(job, this.currencySymbol))\r\n            .join(\"\");\r\n        })\r\n        .then((jobs) => (this.resultsContainer.innerHTML = jobs))\r\n        .catch(() => this.stopLoading());\r\n    });\r\n  }\r\n\r\n  startLoading() {\r\n    this.loadingElement.classList.add(\"loading\");\r\n  }\r\n\r\n  stopLoading() {\r\n    this.loadingElement.classList.remove(\"loading\");\r\n  }\r\n}\r\n","import { JobSearch } from \"./JobSearch\";\r\n\r\nconst jobSearch = new JobSearch(\r\n  \"#search-form\",\r\n  \".result-container\",\r\n  \".loading-element\"\r\n);\r\njobSearch.setCountryCode();\r\njobSearch.configureFormListener();\r\n"]}